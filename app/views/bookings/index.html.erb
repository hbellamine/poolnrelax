<%= render partial: 'shared/navbar' %>

<h1>My pending bookings</h1>


  <% @bookings.each do |booking| %>
    <% puppy = Puppy.find(booking.puppy_id) %>

      <div class="card-product-booking">

          <% if puppy.photo.attached? %>
            <div class="image">
              <%= cl_image_tag puppy.photo.key,height: 300, width: 400, crop: :fill, class: "img-rounded" %>
            </div>
          <% else %>
              <div class="image">
              <%= cl_image_tag "oxmhEgrazrb9AQA8uxakNpyy", height: 300, width: 400, crop: :fill, class: "img-rounded" %>
            </div>
          <% end %>

          <div class ="redlight-green">
            <%= if booking.bookrequest == false then "🛑Waiting for owner confirmation" else " 🐶 Booking Confirmed" end %>
          </div>


                <div class="card text-white bg-dark mb-3" style="max-width: 17rem;">
                          <div class="card-header"><%= puppy.name %></div>
                        <div class="card-body">
                            <h5 class="card-title">Starting date : <%= booking.startdate %> -- Ending date : <%= booking.enddate %></h5>
                            <p class="card-text">Number of days : <%= (booking.enddate - booking.startdate).to_i %> days</p>
                            <p class="card-text">Price per day : <%= puppy.price.to_i %> €/day</p>
                            <p class="card-text">Total : <%= ((booking.enddate - booking.startdate).to_i) * puppy.price.to_i %> €</p>


                            <p><% if policy(booking).destroy? %>
                                          <%= link_to booking_path(booking), method: :delete do %>
                                          <i class="fas fa-trash-alt bin" style="font-size:15px"></i>
                                          <% end %>
                                        <%end%>
                                    </p>
                      </div>
                    </div>

      </div>



  <%end%>
