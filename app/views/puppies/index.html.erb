<%= render 'shared/navbar' %>

<div class="pageindex">
    <div class="grid-container">

      <% @puppies.each do |puppie| %>
      <div class="card-trip">
        <%=link_to puppy_path(puppie), class: "image-container" do %>
          <% if puppie.photo.attached? %>
            <div class="image">
              <%= cl_image_tag puppie.photo.key,height: 300, width: 400, crop: :fill, class: "img-rounded" %>
            </div>
          <% else %>
            <div class="image">
              <%= cl_image_tag "oxmhEgrazrb9AQA8uxakNpyy", height: 300, width: 400, crop: :fill, class: "img-rounded" %>
            </div>
          <% end %>
          <h1 id="puppiename"><%= puppie.name %></h1>

          <% if policy(puppie).edit? %>
                <h1>
                 <% link_to edit_puppy_path(puppie.id) do %>
                   <i class="fas fa-edit"></i>
                  <% end %>
                  </h1>

          <% end %>


        <% if policy(puppie).destroy? %>
          <h1>
            <% link_to puppy_path(puppie.id), method: :delete  %>
            <i class="fas fa-trash-alt bin"></i>
          </h1>
        <%end%>

        <% end %>
      </div>
      <%end%>
    </div>

    <div
      id="map"
      style="width: 50%;
      height: 600px;
      margin-top: 60px;"
      data-markers="<%= @markers.to_json %>"
      data-mapbox-api-key="<%= ENV['MAPBOX_API_KEY'] %>"
    ></div>

</div>

