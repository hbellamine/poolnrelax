<%= render 'shared/navbar' %>

<div class="pageindex">
    <div class="grid-container">

      <% @puppies.each do |puppie| %>
      <div class="card-trip">
        <%=link_to puppy_path(puppie), class: "image-container" do %>
          <% if puppie.photo.attached? %>
            <div class="image">
              <%= cl_image_tag puppie.photo.key %>
            </div>
          <% else %>
            <div class="image"></div>
          <% end %>
          <h1 id="puppiename"><%= puppie.name %></h1>

          <% if policy(puppie).edit? %>
                <h1><%= link_to edit_puppy_path(puppie.id) do %>
                  <i class="fas fa-edit"></i></h1>
                <%end%>
          <% end %>


        <% if policy(puppie).destroy? %>
           <h1> <%= link_to puppy_path(puppie.id), method: :delete do %>
              <i class="fas fa-trash-alt bin"></i> </h1>
            <%end%>
        <%end%>

        <% end %>
      </div>
      <%end%>
    </div>

    <div
      id="map"
      style="width: 50%;
      height: 600px;
      margin-top: 60px;"
      data-markers="<%= @markers.to_json %>"
      data-mapbox-api-key="<%= ENV['MAPBOX_API_KEY'] %>"
    ></div>

</div>

